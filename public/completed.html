<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>Completed | Morse Quest</title>
  <link rel="icon" type="image/png" href="hackher 1.png">

  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --purple:#8B6AAF;
      --pink:#D4789C;
      --text:#6A5A7A;
      --border:#DBCDF0;
      --green:#5A8A7A;
      --bg1:#FDFCFA; --bg2:#FAEDCB; --bg3:#F2C6DE; --bg4:#DBCDF0; --bg5:#C6DEF1;
    }

    body{
      margin:0;
      font-family:"Space Mono",monospace;
      background:linear-gradient(180deg,var(--bg1),var(--bg2),var(--bg3),var(--bg4),var(--bg5));
      color:var(--text);
      overflow-x:hidden;
    }

    .header{
      text-align:center;
      padding:40px 20px 10px;
    }

    .header img{
      height:70px;
    }

    .box{
      max-width:600px;
      margin:40px auto;
      padding:30px;
      background:rgba(255,255,255,0.7);
      border-radius:16px;
      border:2px solid var(--border);
      text-align:center;
      box-shadow:0 12px 25px rgba(0,0,0,0.06);
    }

    h2{
      color:var(--purple);
      font-size:32px;
      margin-bottom:10px;
    }

    .score-box{
      font-size:26px;
      font-weight:700;
      color:var(--green);
      margin-top:20px;
      margin-bottom:10px;
    }

    .note{
      margin-top:15px;
      font-size:17px;
      color:var(--text);
      line-height:1.5;
    }

    .footer{
      margin-top:40px;
      text-align:center;
      font-size:15px;
      opacity:0.7;
    }

    .btn{
      margin-top:25px;
      width:100%;
      padding:14px;
      background:#fff;
      border:2px solid var(--purple);
      color:var(--purple);
      font-size:18px;
      font-weight:700;
      border-radius:12px;
      cursor:pointer;
      transition:.2s;
    }
    .btn:hover{
      background:var(--purple);
      color:#fff;
    }
  </style>
</head>

<body>

<div class="header">
  <img src="hackher 1.png" alt="HackHER Logo">
</div>

<div class="box">
  <h2>ðŸŽ‰ Congratulations!</h2>
  <p>You have completed all rounds of <strong>Morse Quest</strong>.</p>

  <div class="score-box">
    You got <span id="totalCorrect">--</span> out of 4 correct
  </div>

  <p class="note">
    Your responses and completion time have been successfully recorded.<br><br>
    Winners will be selected based on:<br>
    â€¢ Accuracy (Score) + Time Taken (Speed)<br><br>
    Stay tuned for the official results!
  </p>

  <!-- OFFICIAL HACKHER PAGE BUTTON -->
  <button class="btn" onclick="window.location.href='https://hackher.ieeemace.org/';">
    â†— Go to HackHER Official Page
  </button>
</div>

<div class="footer">
  Â© 2025 HackHER | Morse Quest
</div>

<script type="module">
  import { auth, db } from "./firebase.js";
  import { onAuthStateChanged } from 
    "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
  import { doc, getDoc } from 
    "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

  // ðŸš« Disable back button completely
  history.pushState(null, "", location.href);
  window.addEventListener("popstate", () => {
    history.pushState(null, "", location.href);
  });

  // ðŸš« Disable refresh keys
  document.addEventListener("keydown", (e)=>{
    if (e.key === "F5" || (e.ctrlKey && e.key === "r") || (e.metaKey && e.key === "r")) {
      e.preventDefault();
    }
  });

  // Load user score
  onAuthStateChanged(auth, async(user)=>{
    if(!user) return;

    const ref = doc(db,"scores",user.uid);
    const snap = await getDoc(ref);

    if(!snap.exists()) return;

    const d = snap.data();

    let total =
      (d.level1?.score || 0) +
      (d.level2?.score || 0) +
      (d.level3?.score || 0) +
      (d.level4?.score || 0);

    document.getElementById("totalCorrect").innerText = total;
  });
</script>

</body>
</html>

