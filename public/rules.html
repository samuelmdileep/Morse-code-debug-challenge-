<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rules | Morse Quest</title>
  <link rel="icon" type="image/png" href="hackher 1.png">


  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --purple:#8B6AAF;
      --pink:#D4789C;
      --text:#6A5A7A;
      --border:#DBCDF0;
      --green:#5A8A7A;
      --bg1:#FDFCFA; --bg2:#FAEDCB; --bg3:#F2C6DE; --bg4:#DBCDF0; --bg5:#C6DEF1;
    }

    body{
      margin:0;
      font-family:"Space Mono",monospace;
      background:linear-gradient(180deg,var(--bg1),var(--bg2),var(--bg3),var(--bg4),var(--bg5));
      color:var(--text);
      overflow-x:hidden;
    }

    /* HEADER */
    .hackher-header{
      position:fixed;top:0;left:0;right:0;height:72px;
      padding:0 32px;display:flex;align-items:center;
      justify-content:space-between;
      background:rgba(253,252,250,.9);
      backdrop-filter:blur(12px);
      border-bottom:2px solid var(--border);
      z-index:100;
    }
    .nav-left img{height:48px}

    /* EDIT PROFILE & LOGOUT BUTTONS */
    .top-btn{
      position:fixed;
      top:90px;
      right:25px;
      padding:10px 16px;
      border-radius:10px;
      font-family:"Space Mono", monospace;
      font-weight:700;
      cursor:pointer;
      transition:0.2s;
    }

    .edit-btn{
      border:2px solid var(--purple);
      background:#fff;
      color:var(--purple);
      margin-bottom:10px;
    }
    .edit-btn:hover{
      background:var(--purple);
      color:#fff;
    }

    .logout-btn{
      border:2px solid var(--pink);
      background:#fff;
      color:var(--pink);
    }
    .logout-btn:hover{
      background:var(--pink);
      color:#fff;
    }

    main{
      max-width:700px;
      margin:0 auto;
      padding:140px 20px 60px;
      text-align:center;
    }

    h1{
      color:var(--purple);
      font-size:36px;
      font-weight:700;
      margin-bottom:20px;
    }

    .rules-box{
      background:rgba(255,255,255,0.65);
      border:1px solid var(--border);
      border-radius:14px;
      padding:25px;
      text-align:left;
      box-shadow:0 10px 20px rgba(0,0,0,0.05);
      line-height:1.7;
      font-size:18px;
    }

    .start-btn{
      margin-top:35px;
      padding:14px 30px;
      border-radius:12px;
      border:2px solid #000;
      cursor:pointer;
      background:#fff;
      color:#000;
      font-weight:700;
      font-size:18px;
      transition:0.2s ease;
    }
    .start-btn:hover{
      background:#000;
      color:#fff;
    }
  

  /* ===== MOBILE FIXES ===== */
@media (max-width: 600px) {

  .hackher-header {
    height: 60px;
    padding: 0 16px;
  }

  main {
    padding-top: 110px;     /* reduces empty space */
  }

  .top-btn {
    position: absolute;     /* remove fixed floating */
    top: 75px;
    right: 16px;
    transform: scale(0.9);  /* adjust size */
  }

  h1 {
    font-size: 28px;
  }

  .rules-box {
    padding: 18px;
    font-size: 16px;
  }

  .start-btn {
    width: 100%;
    font-size: 16px;
  }
}
</style>

</head>

<body>

  <!-- HEADER -->
  <header class="hackher-header">
    <div class="nav-left">
      <img src="hackher 1.png" alt="HackHER Logo">
    </div>
  </header>

  <!-- TOP BUTTONS -->
  <button class="top-btn edit-btn" id="editProfileBtn">$ edit_profile →</button>

  <!-- MAIN -->
  <main>
    <h1>$ Game Rules</h1>

    <div class="rules-box">
      <p>1. You will face a sequence of Morse code–based puzzle rounds.</p>
      <p>2. Time starts only when you enter each round.</p>
      <p>3. The faster you solve, the better your ranking.</p>
      <p>4. Once you submit the correct answer, the round ends immediately.</p>
      <p>5. No going back to previous rounds after submitting.</p>
      <p>6. Do not refresh the page during a round.</p>
      <p style="color: var(--pink); font-weight:700;">
        7. Ensure a stable internet connection before starting.<br>
        No extra chances or retries will be provided for network/technical issues.
      </p>
    </div>

    <button class="start-btn" id="startGame">START GAME →</button>
  </main>

  <!-- FIREBASE SCRIPT -->
  <script type="module">
    import { auth, db } from "./firebase.js";
    import { onAuthStateChanged, signOut } from 
      "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
    import { doc, setDoc } from 
      "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

    // Protect: only logged in users can access rules
    onAuthStateChanged(auth, (user) => {
      if (!user) {
        window.location.href = "login.html";
      }
    });

    // EDIT PROFILE BTN
    document.getElementById("editProfileBtn").onclick = () => {
      window.location.href = "profile.html";
    };

    // Start Round 1 when button clicked
    document.getElementById("startGame").onclick = async () => {
      const user = auth.currentUser;
      if (!user) return;

      const uid = user.uid;

      await setDoc(
        doc(db, "scores", uid),
        {
          round1Start: Date.now(),
          name: user.displayName || "Unknown Player"
        },
        { merge: true }
      );

      window.location.href = "round1.html";
    };
  </script>

</body>
</html>
